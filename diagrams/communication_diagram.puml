@startuml RestMan_CommunicationDiagram
!theme plain
title Hình 3.5: Biểu đồ giao tiếp - Hệ thống RestMan

!define RECTANGLE class

' Actors
actor Customer
actor SalesStaff

' System components
RECTANGLE DishSearchSystem {
    +searchDish(keyword: String): List<Dish>
    +getDishDetails(dishId: String): Dish
}

RECTANGLE PaymentSystem {
    +searchTable(tableName: String): List<Table>
    +getOrderDetails(tableId: String): Order
    +processPayment(orderId: String): Invoice
    +printInvoice(invoiceId: String): void
}

RECTANGLE Dish {
    +getName(): String
    +getDescription(): String
    +getPrice(): double
}

RECTANGLE Table {
    +getName(): String
    +getStatus(): String
}

RECTANGLE Order {
    +getOrderItems(): List<OrderItem>
    +getTotalAmount(): double
}

RECTANGLE Invoice {
    +getInvoiceDetails(): String
}

' Communication for Search Dish Information
title "1. Chức năng tìm kiếm thông tin món ăn (Customer)"

Customer -> DishSearchSystem : 1: searchDish(keyword)
activate DishSearchSystem
DishSearchSystem -> Dish : 2: searchByName(keyword)
activate Dish
Dish -> DishSearchSystem : 3: return dishList
deactivate Dish
DishSearchSystem -> Customer : 4: return dishList
deactivate DishSearchSystem

Customer -> DishSearchSystem : 5: getDishDetails(dishId)
activate DishSearchSystem
DishSearchSystem -> Dish : 6: getById(dishId)
activate Dish
Dish -> DishSearchSystem : 7: return dishDetails
deactivate Dish
DishSearchSystem -> Customer : 8: return dishDetails
deactivate DishSearchSystem

' Communication for Process Payment
title "2. Chức năng xử lý thanh toán (Sales Staff)"

SalesStaff -> PaymentSystem : 1: searchTable(tableName)
activate PaymentSystem
PaymentSystem -> Table : 2: searchByName(tableName)
activate Table
Table -> PaymentSystem : 3: return tableList
deactivate Table
PaymentSystem -> SalesStaff : 4: return tableList
deactivate PaymentSystem

SalesStaff -> PaymentSystem : 5: getOrderDetails(tableId)
activate PaymentSystem
PaymentSystem -> Order : 6: getByTableId(tableId)
activate Order
Order -> PaymentSystem : 7: return orderDetails
deactivate Order
PaymentSystem -> SalesStaff : 8: return orderDetails
deactivate PaymentSystem

SalesStaff -> PaymentSystem : 9: processPayment(orderId)
activate PaymentSystem
PaymentSystem -> Order : 10: calculateTotal()
activate Order
Order -> PaymentSystem : 11: return totalAmount
deactivate Order
PaymentSystem -> Invoice : 12: createInvoice(orderId, totalAmount)
activate Invoice
Invoice -> PaymentSystem : 13: return invoice
deactivate Invoice
PaymentSystem -> SalesStaff : 14: return invoice
deactivate PaymentSystem

SalesStaff -> PaymentSystem : 15: printInvoice(invoiceId)
activate PaymentSystem
PaymentSystem -> Invoice : 16: print()
activate Invoice
Invoice -> PaymentSystem : 17: printComplete
deactivate Invoice
PaymentSystem -> SalesStaff : 18: printComplete
deactivate PaymentSystem

@enduml
