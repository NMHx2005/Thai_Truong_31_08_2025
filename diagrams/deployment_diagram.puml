@startuml RestMan_DeploymentDiagram
!theme plain
title Hình 3.8: Biểu đồ triển khai - Hệ thống RestMan (Kiến trúc 3 tầng J2EE)

!define NODE class

' Client Tier
node "Client Tier" {
    [Web Browser] as Browser
    [Mobile App] as MobileApp
    [Desktop App] as DesktopApp
}

' Web Tier
node "Web Tier (J2EE Web Container)" {
    [Web Server\nApache Tomcat] as WebServer
    [JSP/Servlet] as JSP
    [HTML/CSS/JavaScript] as Frontend
    [REST API] as RESTAPI
}

' Business Tier
node "Business Tier (J2EE EJB Container)" {
    [EJB Container] as EJBContainer
    [Session Beans] as SessionBeans
    [Message-Driven Beans] as MDB
    [Business Logic] as BusinessLogic
}

' Data Tier
node "Data Tier (J2EE Database)" {
    [Database Server\nPostgreSQL/MySQL] as Database
    [JDBC Driver] as JDBC
    [Connection Pool] as ConnectionPool
}

' External Systems
node "External Systems" {
    [Payment Gateway] as PaymentGateway
    [Email Service] as EmailService
    [Print Service] as PrintService
}

' Deployment Artifacts
artifact "RestMan.war" as WAR
artifact "RestMan.ear" as EAR
artifact "RestMan.jar" as JAR

' Relationships
Browser --> WebServer : HTTP/HTTPS
MobileApp --> WebServer : HTTP/HTTPS
DesktopApp --> WebServer : HTTP/HTTPS

WebServer --> JSP
WebServer --> Frontend
WebServer --> RESTAPI

JSP --> SessionBeans : RMI/IIOP
RESTAPI --> SessionBeans : RMI/IIOP
SessionBeans --> BusinessLogic

BusinessLogic --> JDBC
JDBC --> ConnectionPool
ConnectionPool --> Database

SessionBeans --> PaymentGateway : HTTP/HTTPS
SessionBeans --> EmailService : SMTP
SessionBeans --> PrintService : Local/Network

' Deployment
WAR --> WebServer
EAR --> EJBContainer
JAR --> BusinessLogic

' Notes
note right of WebServer
**Web Tier:**
- Xử lý HTTP requests
- Quản lý session
- Authentication/Authorization
- Static content delivery
end note

note right of EJBContainer
**Business Tier:**
- Business logic implementation
- Transaction management
- Security management
- Message processing
end note

note right of Database
**Data Tier:**
- Data persistence
- ACID properties
- Backup & recovery
- Performance optimization
end note

@enduml
